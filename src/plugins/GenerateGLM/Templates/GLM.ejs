<% for ( var attr in model.attributes) { 
     var val = model.attributes[attr];
     if (commands[attr] && val) { -%>
#<%- commands[attr] %> <%- attr %>=<%- val %>;
<%   }
   } -%>

<% model.clocks.map(function(clock) { -%>
clock {
  timestamp '<%- clock.timestamp %>';
  stoptime '<%- clock.stoptime %>';
  timezone <%- clock.timezone %>;
}
<% }); -%>

<% model.powerflows.map(function(obj) { -%>
module <%- obj.type %> {
<%   for (var attr in obj.attributes) { 
       if ( attr == 'name' ) continue;
       var val = obj.attributes[attr]; -%>
  <%- attr %> <%- val %>;
<%   } -%>
}
<% }); -%>

<% model.residentials.map(function(obj) { -%>
module <%- obj.type %> {
<%   for (var attr in obj.attributes) { 
       if ( attr == 'name' ) continue;
       var val = obj.attributes[attr]; -%>
  <%- attr %> <%- val %>;
<%   } -%>
}
<% }); -%>

<% model.schedules.map(function(schedule) { -%>
schedule <%- schedule.name %> {
<%   schedule.schedule_entrys.map(function(entry) {
       if (entry.value) { -%>
    <%- entry.minutes %> <%- entry.hours %> <%- entry.days %> <%- entry.months %> <%- entry.weekdays %> <%- entry.value %>;
<%     } 
       else { -%>
    <%- entry.minutes %> <%- entry.hours %> <%- entry.days %> <%- entry.months %> <%- entry.weekdays %>;
<%     }
     }); -%>
}
<% }); -%>

<% childTypes.map(function(childType) {
      var listName = childType + 's';
      if (model[listName] == undefined) return;
      model[listName].map(function(obj) { -%>
object <%- obj.type %> {
<%  	//
        var ptrs = {};
	if (pointerDict[obj.type]) {
          var keys = Object.keys(pointerDict[obj.type]);
          keys.map(function(key) { ptrs[pointerDict[obj.type][key]] = true; });
        }
        for (var attr in obj.attributes) {
	  var val = obj.attributes[attr];
          if (ptrs[attr]) continue;
          if (val == undefined) continue; -%>
  <%- attr %> <%- val %>;
<%	} -%>
<%  	for (var ptr in obj.pointers) {
	  var dst = obj[ptr]; 
          if (!pointerDict[obj.type] || !pointerDict[obj.type][ptr]) continue;
          if (dst == undefined) continue; -%>
  <%- pointerDict[obj.type][ptr] %> <%- dst.type %>:<%- dst.name %>;
<%	} -%>
 }
<%      });
  }); -%>
